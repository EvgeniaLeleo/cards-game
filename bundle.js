(()=>{"use strict";function e(e){return e.concat(e)}function t(e){for(var t,a=e.length-1;a>0;a--){var n=Math.floor(Math.random()*(a+1));t=[e[n],e[a]],e[a]=t[0],e[n]=t[1]}return e}function a(){window.app.userTimeSekMin[0]++;var e=document.querySelector(".timer__count_sek"),t=document.querySelector(".timer__count_min");e.textContent="0"+window.app.userTimeSekMin[0],10<=window.app.userTimeSekMin[0]&&window.app.userTimeSekMin[0]<=59&&(e.textContent=window.app.userTimeSekMin[0].toString()),60===window.app.userTimeSekMin[0]&&(e.textContent="00",window.app.userTimeSekMin[0]=0,window.app.userTimeSekMin[1]++,t.textContent="0"+window.app.userTimeSekMin[1],10<=window.app.userTimeSekMin[1]&&window.app.userTimeSekMin[1]<=59&&(t.textContent=window.app.userTimeSekMin[1].toString()),60===window.app.userTimeSekMin[1]&&(e.textContent="00",t.textContent="00",window.app.userTimeSekMin[0]=0,window.app.userTimeSekMin[1]=0))}function n(){for(var e=document.querySelectorAll(".card"),t=0;t<e.length;t++)e[t].innerHTML='<img src="./static/img/back.png" alt="Card back" />',e[t].style.transform="rotateY(-180deg) scale(-1, 1)",e[t].setAttribute("style","pointer-events: auto;"),e[t].style.cursor="pointer"}function i(){for(var e=document.querySelectorAll(".card"),t=0;t<e.length;t++)e[t].innerHTML='<img class="img-child" src="./static/img/back.png" alt="Card back" />',e[t].style.transform="rotateY(-180deg) scale(-1, 1)",e[t].setAttribute("style","pointer-events: auto;"),e[t].style.cursor="pointer"}function d(){for(var e=document.querySelectorAll(".card"),t=0;t<e.length;t++)e[t].style.transform="rotateY(-180deg) scale(-1, 1)",e[t].setAttribute("style","pointer-events: auto;"),e[t].style.cursor="pointer",e[t].style.background="#c8e7ff"}function s(e){return"string"!=typeof e?'<div class="card__content">\n  <div class="card__info card__info_top">\n    <div class="card__text">'.concat(e.text,'</div>\n    <img\n      class="card__suit"\n      src="').concat(e.suit,'"\n      alt="').concat(e.name,'"\n    />\n  </div>\n  <div class="card__center">\n    <img src="').concat(e.suit,'"\n    alt="').concat(e.name,'" />\n  </div>\n  <div class="card__info card__info_bottom">\n    <div class="card__text">').concat(e.text,'</div>\n    <img\n      class="card__suit"\n      src="').concat(e.suit,'"\n      alt="').concat(e.name,' "\n    />\n  </div>\n  </div>\n  </div>'):""}function r(){var e=document.createElement("div");e.classList.add("shadow");var t=document.createElement("form");t.classList.add("form","form__win");var a=document.createElement("img");a.classList.add("img-win"),a.src="./static/img/win.png";var n=document.createElement("h2");n.classList.add("h2-title"),n.textContent="Вы выиграли!";var i=document.createElement("p");i.classList.add("final-text"),i.textContent="Затраченное время:";var d=document.querySelector(".timer__count_min"),s=document.querySelector(".timer__count_sek"),r=document.createElement("p");r.classList.add("final-time"),r.textContent=d.textContent+"."+s.textContent;var c=document.createElement("button");c.classList.add("button"),c.textContent="Играть снова";var o=document.querySelector(".screen-container");o.appendChild(e),o.appendChild(t),t.appendChild(a),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(c),t.addEventListener("submit",(function(e){e.preventDefault(),o.innerHTML="",g(o)}))}function c(){var e=document.createElement("div");e.classList.add("shadow");var t=document.createElement("form");t.classList.add("form","form__lose");var a=document.createElement("img");a.classList.add("img-lose"),a.src="./static/img/lose.png";var n=document.createElement("h2");n.classList.add("h2-title"),n.textContent="Вы проиграли!";var i=document.createElement("p");i.classList.add("final-text"),i.textContent="Затраченное время:";var d=document.querySelector(".timer__count_min"),s=document.querySelector(".timer__count_sek"),r=document.createElement("p");r.classList.add("final-time"),r.textContent=d.textContent+"."+s.textContent;var c=document.createElement("button");c.classList.add("button"),c.textContent="Играть снова";var o=document.querySelector(".screen-container");o.appendChild(e),o.appendChild(t),t.appendChild(a),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(c),t.addEventListener("submit",(function(e){e.preventDefault(),o.innerHTML="",g(o)}))}function o(i){var d=t(i.slice()).splice(0,3*Number(window.app.level));window.app.cardsForCurrentGame=t(e(d)),"object"==typeof window.app.cardsForCurrentGame&&function(e){for(var t=document.querySelectorAll(".card"),a=0;a<t.length;a++)t[a].innerHTML=s(e[a]),t[a].style.transform="rotateY(-180deg) scale(-1, 1)"}(window.app.cardsForCurrentGame),window.app.stopwatch=window.setInterval(a,1e3),window.app.delay=window.setTimeout(n,window.app.cardDisplayTime+window.app.cardDisplayTimeDelay*(Number(window.app.level)-1)),function(){var e=document.querySelectorAll(".card"),t=window.app.cardsForCurrentGame;if("object"==typeof t)for(var a=function(a){e[a].addEventListener("click",(function(){e[a].innerHTML=s(t[a]),e[a].style.transform="rotateY(180deg) scale(-1, 1)",window.app.userCards[0]||window.app.userTargets.includes(a)||(window.app.userCards[0]=t[a].name,window.app.userTargets.push(a)),window.app.userCards[0]&&!window.app.userTargets.includes(a)&&(window.app.userCards[1]=t[a].name,window.app.userTargets.push(a),window.app.userCards[0]!==window.app.userCards[1]&&(window.app.userCards=[],window.app.userTargets=[],window.app.guessedPairs=[],document.querySelectorAll(".attempt")[window.app.attempts].style.background="#c14a00",window.app.attempts++,3===window.app.attempts&&setTimeout(c,window.app.commonDelay),setTimeout(n,window.app.commonDelay)),window.app.userCards.length>0&&window.app.userCards[0]===window.app.userCards[1]&&(window.app.guessedPairs.includes(window.app.userCards[0])||window.app.guessedPairs.push(window.app.userCards[0]),window.app.userCards=[],window.app.guessedPairs.length===3*Number(window.app.level)&&(clearInterval(window.app.stopwatch),setTimeout(r,window.app.commonDelay))))}))},i=0;i<e.length;i++)a(i)}()}const p=JSON.parse('[{"name":"diamonds6","text":"6","suit":"./static/img/diamonds.png"},{"name":"diamonds7","text":"7","suit":"./static/img/diamonds.png"},{"name":"diamonds8","text":"8","suit":"./static/img/diamonds.png"},{"name":"diamonds9","text":"9","suit":"./static/img/diamonds.png"},{"name":"diamonds10","text":"10","suit":"./static/img/diamonds.png"},{"name":"diamondsJ","text":"J","suit":"./static/img/diamonds.png"},{"name":"diamonds-Q","text":"Q","suit":"./static/img/diamonds.png"},{"name":"diamondsK","text":"K","suit":"./static/img/diamonds.png"},{"name":"diamondsA","text":"A","suit":"./static/img/diamonds.png"},{"name":"spades6","text":"6","suit":"./static/img/spades.png"},{"name":"spades7","text":"7","suit":"./static/img/spades.png"},{"name":"spades8","text":"8","suit":"./static/img/spades.png"},{"name":"spades9","text":"9","suit":"./static/img/spades.png"},{"name":"spades10","text":"10","suit":"./static/img/spades.png"},{"name":"spadesJ","text":"J","suit":"./static/img/spades.png"},{"name":"spades-Q","text":"Q","suit":"./static/img/spades.png"},{"name":"spadesK","text":"K","suit":"./static/img/spades.png"},{"name":"spadesA","text":"A","suit":"./static/img/spades.png"},{"name":"hearts6","text":"6","suit":"./static/img/hearts.png"},{"name":"hearts7","text":"7","suit":"./static/img/hearts.png"},{"name":"hearts8","text":"8","suit":"./static/img/hearts.png"},{"name":"hearts9","text":"9","suit":"./static/img/hearts.png"},{"name":"hearts10","text":"10","suit":"./static/img/hearts.png"},{"name":"heartsJ","text":"J","suit":"./static/img/hearts.png"},{"name":"hearts-Q","text":"Q","suit":"./static/img/hearts.png"},{"name":"heartsK","text":"K","suit":"./static/img/hearts.png"},{"name":"heartsA","text":"A","suit":"./static/img/hearts.png"},{"name":"clubs6","text":"6","suit":"./static/img/clubs.png"},{"name":"clubs7","text":"7","suit":"./static/img/clubs.png"},{"name":"clubs8","text":"8","suit":"./static/img/clubs.png"},{"name":"clubs9","text":"9","suit":"./static/img/clubs.png"},{"name":"clubs10","text":"10","suit":"./static/img/clubs.png"},{"name":"clubsJ","text":"J","suit":"./static/img/clubs.png"},{"name":"clubs-Q","text":"Q","suit":"./static/img/clubs.png"},{"name":"clubsK","text":"K","suit":"./static/img/clubs.png"},{"name":"clubsA","text":"A","suit":"./static/img/clubs.png"}]');function l(e){window.app.userTimeSekMin=[0,0],window.app.guessedPairs=[],window.app.userCards=[],window.app.userTargets=[],window.app.attempts=0,clearTimeout(window.app.delay),clearInterval(window.app.stopwatch),e.innerHTML="";var t=document.createElement("div");t.classList.add("header");var a=document.createElement("div");a.classList.add("timer");var n=document.createElement("p");n.classList.add("timer__text"),n.textContent="min";var i=document.createElement("p");i.classList.add("timer__text","timer__text_sek"),i.textContent="sek";var d=document.createElement("p");d.classList.add("timer__count","timer__count_min"),d.textContent="00";var s=document.createElement("p");s.classList.add("timer__count"),s.textContent=".";var r=document.createElement("p");r.classList.add("timer__count","timer__count_sek"),r.textContent="00";var c=document.createElement("div");c.classList.add("attempts");var l=document.createElement("div");l.classList.add("attempt");var u=document.createElement("div");u.classList.add("attempt");var m=document.createElement("div");m.classList.add("attempt");var w=document.createElement("button");w.classList.add("button"),w.textContent="Начать заново";var v=document.createElement("div");v.classList.add("cards-container"),e.appendChild(t),t.appendChild(a),a.appendChild(n),a.appendChild(i),a.appendChild(d),a.appendChild(s),a.appendChild(r),t.appendChild(c),c.appendChild(l),c.appendChild(u),c.appendChild(m),t.appendChild(w),e.appendChild(v),function(e){e.style.width="645px",e.style.height=133*Number(window.app.level)+15*(Number(window.app.level)-1)+"px";for(var t=0;t<6*Number(window.app.level);t++){var a=document.createElement("div");a.classList.add("card"),a.style.background="#c2f5ff",e.appendChild(a)}}(v),o(p),w.addEventListener("click",(function(){e.innerHTML="",g(e)}))}const u=JSON.parse('[{"name":"car-yellow","img":"./static/img/img-child/car-yellow.jpg"},{"name":"car-red","img":"./static/img/img-child/car-red.jpg"},{"name":"car-vspysh","img":"./static/img/img-child/car-vspysh.jpg"},{"name":"car-green","img":"./static/img/img-child/car-green.jpg"},{"name":"unicorn-pink","img":"./static/img/img-child/unicorn-pink.jpg"},{"name":"unicorn-color","img":"./static/img/img-child/unicorn-color.jpg"},{"name":"unicorn-green","img":"./static/img/img-child/unicorn-green.jpg"},{"name":"unicorn-butterfly","img":"./static/img/img-child/unicorn-butterfly.jpg"},{"name":"unicorn-blue","img":"./static/img/img-child/unicorn-blue.jpg"}]');function m(n){window.app.userTimeSekMin=[0,0],window.app.guessedPairs=[],window.app.userCards=[],window.app.userTargets=[],window.app.attempts=0,clearTimeout(window.app.delay),clearInterval(window.app.stopwatch),n.innerHTML="";var d=document.createElement("div");d.classList.add("header");var s=document.createElement("div");s.classList.add("timer");var c=document.createElement("p");c.classList.add("timer__text"),c.textContent="min";var o=document.createElement("p");o.classList.add("timer__text","timer__text_sek"),o.textContent="sek";var p=document.createElement("p");p.classList.add("timer__count","timer__count_min"),p.textContent="00";var l=document.createElement("p");l.classList.add("timer__count"),l.textContent=".";var m=document.createElement("p");m.classList.add("timer__count","timer__count_sek"),m.textContent="00",document.createElement("div").classList.add("attempts"),document.createElement("div").classList.add("attempt"),document.createElement("div").classList.add("attempt"),document.createElement("div").classList.add("attempt");var w=document.createElement("button");w.classList.add("button"),w.textContent="Начать заново";var v,f=document.createElement("div");f.classList.add("cards-container-child"),n.appendChild(d),d.appendChild(s),s.appendChild(c),s.appendChild(o),s.appendChild(p),s.appendChild(l),s.appendChild(m),d.appendChild(w),n.appendChild(f),function(e){document.querySelector(".cards-container-child").classList.add("cards-container-child_".concat(window.app.level));for(var t=0;t<6*Number(window.app.level);t++){var a=document.createElement("div");a.classList.add("card"),a.style.background="#c2f5ff",e.appendChild(a)}var n=120,i=3,d=2;"1"===window.app.level&&(n=150,i=3,d=2),"2"===window.app.level&&(i=4,d=3),"3"===window.app.level&&(i=6,d=3),e.style.width=i*n+15*(i-1)+"px",e.style.height=d*n+15*(d-1)+"px"}(f),v=t(u.slice()).splice(0,3*Number(window.app.level)),window.app.cardsForCurrentGame=t(e(v)),"object"==typeof window.app.cardsForCurrentGame&&function(e){for(var t=document.querySelectorAll(".card"),a=0;a<t.length;a++)t[a].innerHTML='<img class="img-child" src="'.concat(e[a].img,'" alt="').concat(e[a].name,'" />'),t[a].style.transform="rotateY(-180deg) scale(-1, 1)"}(window.app.cardsForCurrentGame),window.app.stopwatch=window.setInterval(a,1e3),window.app.delay=window.setTimeout(i,window.app.cardDisplayTime+2*window.app.cardDisplayTimeDelay*(Number(window.app.level)-1)),function(){var e=document.querySelectorAll(".card"),t=window.app.cardsForCurrentGame;if("object"==typeof t)for(var a=function(a){e[a].addEventListener("click",(function(){e[a].innerHTML='<img class="img-child" src="'.concat(t[a].img,'" alt="').concat(t[a].name,'" />'),e[a].style.transform="rotateY(180deg) scale(-1, 1)",window.app.userCards[0]||window.app.userTargets.includes(a)||(window.app.userCards[0]=t[a].name,window.app.userTargets.push(a)),window.app.userCards[0]&&!window.app.userTargets.includes(a)&&(window.app.userCards[1]=t[a].name,window.app.userTargets.push(a),window.app.userCards[0]!==window.app.userCards[1]&&(window.app.userCards=[],window.app.userTargets=[],window.app.guessedPairs=[],setTimeout(i,window.app.commonDelay)),window.app.userCards.length>0&&window.app.userCards[0]===window.app.userCards[1]&&(window.app.guessedPairs.includes(window.app.userCards[0])||window.app.guessedPairs.push(window.app.userCards[0]),window.app.userCards=[],window.app.guessedPairs.length===3*Number(window.app.level)&&(clearInterval(window.app.stopwatch),setTimeout(r,window.app.commonDelay))))}))},n=0;n<e.length;n++)a(n)}(),w.addEventListener("click",(function(){n.innerHTML="",g(n)}))}function w(n){window.app.userTimeSekMin=[0,0],window.app.guessedPairs=[],window.app.userCards=[],window.app.userTargets=[],window.app.attempts=0,clearTimeout(window.app.delay),clearInterval(window.app.stopwatch),n.innerHTML="";var i=document.createElement("div");i.classList.add("header");var s=document.createElement("div");s.classList.add("timer");var c=document.createElement("p");c.classList.add("timer__text"),c.textContent="min";var o=document.createElement("p");o.classList.add("timer__text","timer__text_sek"),o.textContent="sek";var p=document.createElement("p");p.classList.add("timer__count","timer__count_min"),p.textContent="00";var l=document.createElement("p");l.classList.add("timer__count"),l.textContent=".";var u=document.createElement("p");u.classList.add("timer__count","timer__count_sek"),u.textContent="00",document.createElement("div").classList.add("attempts"),document.createElement("div").classList.add("attempt"),document.createElement("div").classList.add("attempt"),document.createElement("div").classList.add("attempt");var m=document.createElement("button");m.classList.add("button"),m.textContent="Начать заново";var w,v=document.createElement("div");v.classList.add("cards-container-baby"),n.appendChild(i),i.appendChild(s),s.appendChild(c),s.appendChild(o),s.appendChild(p),s.appendChild(l),s.appendChild(u),i.appendChild(m),n.appendChild(v),function(e){document.querySelector(".cards-container-baby").classList.add("cards-container-baby_".concat(window.app.level));var t=Number(window.app.level)+1,a=2*t;"1"===window.app.level&&(document.querySelector(".timer").style.marginRight="70px");for(var n=0;n<a;n++){var i=document.createElement("div");i.classList.add("card","card_baby"),i.style.background="#dddddd",e.appendChild(i)}e.style.width=150*t+15*(t-1)+"px",e.style.height="315px"}(v),w=t(["#d92519","#fff500","#194888","#02913f"]).splice(0,Number(window.app.level)+1),window.app.cardsForCurrentGame=t(e(w)),function(){for(var e=document.querySelectorAll(".card"),t=0;t<e.length;t++)e[t].style.background="".concat(window.app.cardsForCurrentGame[t]),e[t].style.border="10px solid #ffffff",e[t].style.transform="rotateY(-180deg) scale(-1, 1)"}(),window.app.stopwatch=window.setInterval(a,1e3),window.app.delay=window.setTimeout(d,window.app.cardDisplayTime),function(){var e=document.querySelectorAll(".card"),t=window.app.cardsForCurrentGame;if("object"==typeof t)for(var a=function(a){e[a].addEventListener("click",(function(){e[a].style.transform="rotateY(180deg) scale(-1, 1)",e[a].style.background="".concat(t[a]),e[a].style.border="10px solid #ffffff",window.app.userCards[0]||window.app.userTargets.includes(a)||(window.app.userCards[0]=t[a],window.app.userTargets.push(a)),window.app.userCards[0]&&!window.app.userTargets.includes(a)&&(window.app.userCards[1]=t[a],window.app.userTargets.push(a),window.app.userCards[0]!==window.app.userCards[1]&&(window.app.userCards=[],window.app.userTargets=[],window.app.guessedPairs=[],setTimeout(d,window.app.commonDelay)),window.app.userCards.length>0&&window.app.userCards[0]===window.app.userCards[1]&&(window.app.guessedPairs.includes(window.app.userCards[0])||window.app.guessedPairs.push(window.app.userCards[0]),window.app.userCards=[],window.app.guessedPairs.length===Number(window.app.level)+1&&(clearInterval(window.app.stopwatch),setTimeout(r,window.app.commonDelay))))}))},n=0;n<e.length;n++)a(n)}(),m.addEventListener("click",(function(){n.innerHTML="",g(n)}))}function g(e){window.app.userTimeSekMin=[0,0],window.app.guessedPairs=[],window.app.userCards=[],window.app.userTargets=[],window.app.attempts=0,clearTimeout(window.app.delay),clearInterval(window.app.stopwatch),e.innerHTML="";var t=document.createElement("form");t.classList.add("form","form__start");var a=document.createElement("h2");a.classList.add("h2-title"),a.textContent="Выберите сложность";var n=document.createElement("div");n.classList.add("difficulty"),e.appendChild(t),t.appendChild(a),t.appendChild(n);for(var i=0;i<3;i++){var d=document.createElement("input");d.classList.add("difficulty__level","radio"),d.type="radio",d.id="level".concat(i+1),d.name="difficulty",d.value="".concat(i+1);var s=document.createElement("label");s.classList.add("difficulty__level_label","label"),s.setAttribute("for","level".concat(i+1)),s.textContent="".concat(i+1),n.appendChild(d),n.appendChild(s)}var r=document.createElement("div");r.classList.add("buttons-container"),t.appendChild(r);var c=document.createElement("button");c.classList.add("difficulty__button","button"),c.type="submit",c.textContent="Старт",r.appendChild(c);var o=document.createElement("button");o.classList.add("difficulty__button","difficulty__button_change-age","button"),o.type="button",o.textContent="На главную",r.appendChild(o);var p=document.querySelectorAll(".difficulty__level"),u=document.querySelectorAll(".difficulty__level_label");p.forEach((function(e){e.addEventListener("click",(function(){c.textContent="Старт",c.style.background="#7ac100",u.forEach((function(e){e.style.background="#ffffff",e.style.color="#0080c1"})),u[Number(e.value)-1].style.background="#0080c1",u[Number(e.value)-1].style.color="#ffffff"}))})),t.addEventListener("submit",(function(t){t.preventDefault();for(var a=0;a<p.length;a++){if(p[a].checked){window.app.level=p[a].value,0===Number(window.app.age)&&w(e),1===Number(window.app.age)&&m(e),2===Number(window.app.age)&&l(e);break}c.textContent="Выберите уровень!",c.style.background="#c14a00"}})),o.addEventListener("click",(function(){v(e)}))}function v(e){window.app.userTimeSekMin=[0,0],window.app.guessedPairs=[],window.app.userCards=[],window.app.userTargets=[],window.app.attempts=0,clearTimeout(window.app.delay),clearInterval(window.app.stopwatch),e.innerHTML="";var t=document.createElement("form");t.classList.add("form","form__hello");var a=document.createElement("h2");a.classList.add("h2-title"),a.textContent="Ваш возраст?";var n=document.createElement("div");n.classList.add("age"),e.appendChild(t),t.appendChild(a),t.appendChild(n);for(var i=0;i<3;i++){var d=document.createElement("input");d.classList.add("user__age","radio"),d.type="radio",d.id="userAge".concat(i),d.name="userAge",d.value="".concat(i);var s=document.createElement("label");s.classList.add("user__age_label","label"),s.setAttribute("for","userAge".concat(i)),n.appendChild(d),n.appendChild(s)}var r=document.querySelectorAll(".user__age_label");r[0].innerHTML="0+",r[1].textContent="3+",r[2].textContent="7+";var c=document.createElement("button");c.classList.add("age__button","button"),c.textContent="Играть",t.appendChild(c);var o=document.querySelectorAll(".user__age"),p=document.querySelectorAll(".user__age_label");o.forEach((function(e){e.addEventListener("click",(function(){c.textContent="Играть",c.style.background="#7ac100",p.forEach((function(e){e.style.background="#ffffff",e.style.color="#0080c1"})),p[Number(e.value)].style.background="#0080c1",p[Number(e.value)].style.color="#ffffff"}))})),t.addEventListener("submit",(function(t){t.preventDefault();for(var a=0;a<o.length;a++){if(o[a].checked){window.app.age=o[a].value,g(e);break}c.textContent="Вы не выбрали возраст!",c.style.background="#c14a00"}}))}document.addEventListener("DOMContentLoaded",(function(){window.app={userTimeSekMin:[0,0],cardsForCurrentGame:[],userCards:[],userTargets:[],guessedPairs:[],attempts:0,commonDelay:400,cardDisplayTime:5e3,cardDisplayTimeDelay:1e3},v(document.querySelector(".screen-container"))}))})();